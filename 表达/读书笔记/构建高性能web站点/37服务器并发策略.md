# 服务器并发策略
> 从本质上讲，所有到达服务器的请求都封装在IP包中，位于网卡的接收缓冲区中，这时候。。。

问题1：网卡的接收缓冲区是属于网卡的一部分吗?

## 一个进程处理一个连接，非阻塞I/O
fork模式 由主进程负责accept()来自客户端的连接，一旦接收连接，便马上fork（）一个新的worker进程来处理，处理结束后，这个进程便被销毁。
prefork模式 主进程预先创建一定数量的子进程，每个请求由一个子进程来处理，但每个子进程可以处理多个请求。父进程只负责管理子进程，根据站点负载来调整子进程的数量，相当于动态维护一个进程池。

accept()是在一个socket接收的一个连接，accept（）是c语言中网络编程的重要的函数。有以下两种策略：
* 主进程用非阻塞accept()来接收连接，当建立连接后，主进程将任务分配给空闲的子进程来处理；
* 所有子进程使用阻塞accept()来竞争接收连接，一旦一个子进程建立连接后，它将继续进行处理。

poll()用来检查当前的socket连接是否有新的请求数据到达。

## 一个线程处理一个连接，非阻塞I/O
允许在一个进程中通过多个线程来处理多个连接，其中每个线程处理一个连接。

## 一个进程处理多个连接，非阻塞I/O

## 一个线程处理多个连接，异步I/O


### 常用命令
strace：常用来跟踪进程执行时的系统调用和所接收的信号。 
在Linux世界，进程不能直接访问硬件设备，当进程需要访问硬件设备(比如读取磁盘文件，接收网络数据等等)时，必须由用户态模式切换至内核态模式，通过系统调用访问硬件设备。strace可以跟踪到一个进程产生的系统调用,包括参数，返回值，执行消耗的时间。