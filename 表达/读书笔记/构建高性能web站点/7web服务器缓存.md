# web服务器缓存

### URL映射

向web服务器发送HTTP请求后，它的主要工作就是解析url，然后完成从url到实际内容或资源的映射。

- url不做任何配置时，发送请求url后，web服务器只需要在url映射对应的路径下读取这个文件就好了，这部分开销主要是在磁盘I/O。
- 使用url Rewrite地址重写技术



### 缓存响应内容

* 缓存静态内容：将url映射对应关系缓存起来，适用于静态内容和不常更新的动态内容，web服务器将内容缓存后，等下次再收到请求时就可以把缓存好的响应内容直接返回给浏览器。一般存在服务器的内存或者磁盘中。
* 缓存动态内容：
问题1：开了缓存模式，但没使用动态内容本身的缓存，那这个缓存使用的是什么缓存？
* 控制有效期：在HTTP响应头中追加Expires标记，设置缓存时间；假如动态内容没有输出Expires标记，如果包含另一个标记Last-Modified，则服务器缓存区会使用默认最大缓存时间CacheMaxExpire；如果这两个标记都没有，则读取CacheIgnoreNoLastMod的设置，如果是开启则不缓存动态内容，否则将当前时间记录为Last-Modified，并且使用默认最大缓存时间。
跳过缓存：1）设置Expires=0；2）设置CacheIgnoreHeaders
