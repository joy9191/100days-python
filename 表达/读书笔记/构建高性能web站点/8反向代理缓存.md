### 代理
为了访问一些由于某种原因无法直接访问的站点，会通过指定的代理服务器，绕过某些限制来访问目标站点。
代理服务器工作原理：代理服务器将用户的HTTP请求转发到最终服务器，再将从服务器收到的响应数据返回给用户浏览器，相当于一个中间商，我们平时使用的抓包工具就是使用代理来进行工作的。
当用户端PC处于内部网络时，网关会使用NAT技术，将PC内部的IP地址与网关的外网IP地址进行相互转换，使得PC发出的请求可以到达外部网络的服务器，同时将返回数据正确传送给内部网络的PC。我们平时的办公网络使用的都是内部IP，是经过NAT转换之后通过出口IP进行实际请求。
上面说的场景中NAT的作用相当于代理服务器，区别在于代理服务器工作在应用层，只有当它支持某个协议的时候才可以转发该协议，而NAT工作在应用层以下，可以透明的转发应用层的协议。
问题1：NAT工作在应用层之下，为什么就能支持转发所有应用层协议的数据呢？
代理的特点：服务器只知道请求时通过代理或者网关发出来，并不知道背后是PC浏览器在请求，所以PC没有暴露在互联网中，有效提高安全性能，避免被攻击。
代理的缓存：假如一个公司内网通过代理服务器上网，那么只要有一个人访问一个文件，然后缓存在代理服务器上，那么下一个用户来请求就可以使用缓存，而不需要再次经过外部网络请求服务器了，并且节省了带宽。

#### 反向代理
什么是反向代理？
web服务器隐藏在代理服务器之后，用户通过反向代理服务器来间接访问web服务器，注意这里代理的对象是服务端。反向代理服务器基于HTTP与web服务器进行通信。
思考：反向代理的意义是什么？
1）缓存，可以将经常请求的响应内容缓存在代理服务器上，提高吞吐率，节省带宽；
2）负载均衡，通过反向代理服务器对网站负载进行优化；
3）设置安全相关的控制，例如防火墙等（仅知道这个概念，具体知识可以以后了解）

nginx中反向代理配置，设置proxy_pass指令，打开mod_proxy模块。

通过配置缓存策略文件来控制什么内容需要被缓存，哪些是不需要被缓存。

反向代理缓存区的常见问题：
1、缓存区空间已满怎么办？
可以通过监控站点的使用量以及缓存淘汰个数，来估算出大概的缓存区空间，并且分配出大约为它的5倍以上的缓存空间，以适应一段时间内的内容数量增长。
2、缓存有效期如何设置？
取决于后端web服务器的承受能力，以及你对站点内容实时性的要求来取值，是一个需要根据实际情况进行平衡的过程。
3、有些内容没有被缓存怎么办？
例如跟cookies相关的页面往往因为配置没有被缓存，存在这种情况在配置时就需要做好规划，可以根据内容是否可以缓存在反向代理服务器上，将它们置于不同的主机中，这样便可在必要的时候将可以缓存的内容快速与反向代理服务器对接，获得较好的加速效果。