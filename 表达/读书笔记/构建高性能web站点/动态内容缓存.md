# 重复的开销
在web中有很多请求需要进行数据库操作，比如复杂的查询语句会消耗掉较长时间，而有一下数据在多次请求中不会发生变化，例如每日、每月排行榜，通过缓存机制可以不需要进行这种重复计算，大大提升性能。
# 缓存与速度
* 缓存的目的是把需要花费昂贵开销的计算结果保存起来，在以后需要的时候直接读出，避免重复计算。
* CPU缓存：是位于CPU和内存之间的临时存储器，它容量不大，但是交换速度要高于内存，CPU将频繁交换的数据放在缓存中。
问题1：什么样的数据可以放在CPU缓存中？举个例子。

* 缓冲的目的在于改善各部件之间由于速度不同而引发的问题。
> 比如将用户态地址空间的数据写入磁盘时，显然内存的速度比磁盘速度要快得多，所以人们设计了磁盘缓冲区，让数据源源不断地流进缓冲区，再由缓冲区负责写入磁盘，这样内存便可以不必随着磁盘的慢节奏来工作，所以磁盘缓冲区起到了将快速设备和慢速设备平滑衔接的作用。

问题2：磁盘缓冲区是在内存中吗？

* 缓存的速度和命中率：如果计算速度和读取缓存的速度差不多，缓存也就没有意义了；如果每次都在缓存中找不到需要的数据，那么缓存就毫无意义，还额外增加了管理缓存的开销。

# 页面缓存
页面缓存：缓存的内容实际上是动态网页输出的HTML。
MVC架构的框架，缓存管理是由控制器Controller来控制的。
页面缓存能节省一些开销：
1、与数据库服务器通信时接收数据
2、输出缓存后终止程序，停止对后续文件的读取。
问题1：输出缓存后终止程序，停止对后续文件的读取。---什么意思？



缓存持久化与查找：使用缓存目录分级来查询缓存，不需要扫描全部缓存文件，大大提高查询效率。

过期检查：

动态内容的目的在于提供变化的内容，所以它的缓存不可能长期有效，否则就失去了动态内容的意义，所以动态内容的缓存机制必须能够判断缓存何时过期，以及何时需要生成新的缓存。

常见的缓存过期检查策略：为每个缓存标记过期时间，然后动态内容每次对缓存进行过期检查。具体方法如下：

>  每次检查时，根据缓存的创建时间、缓存有效期设置的长度，以及当前时间，来判断是否过期，也就是说，如果当前时间距离缓存创建时间的间隔超过有效期长度的话，认为缓存过期，这是一种相对比较。
> 每次检查时，根据缓存的过期时间和当前时间来判断是否过期，这个方法比较简单，直接检查当前时间是否超过缓存过期时间即可，这是一种绝对比较。



